<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script> 
</head>
<body>

  
  <div class="container my-3">
    <div class="display-6 mb-4">
      Disk Scheduling 
    </div>
    <div class="row">
      <div class="col-12 col-md-6 mb-3">
        <canvas id="fifo-chart"></canvas>
      </div>
      <div class="col-12 col-md-6 mb-3">
        <canvas id="sstf-chart"></canvas>
      </div>
      <div class="col-12 col-md-6 mb-3">
        <canvas id="scan-chart"></canvas>
      </div>
      <div class="col-12 col-md-6 mb-3">
        <canvas id="c-scan-chart"></canvas>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>

  <script>
    const ctx = document.getElementById('fifo-chart');
    
    function fifoCalc(head, request_sector){

      current_head = head;

      labels = [];
      data = [];
      iter = 1;
      now = Date.now();
      data.push({
        x: now + iter,
        y: current_head,
      });
      request_sector.forEach(sector => {
        let head_pos = current_head;
        let traverse_direction = head_pos > sector;
        if(head_pos < sector) {
          traverse_direction = head_pos < sector;
        }
        for(head_pos; head_pos > sector ? head_pos > sector : head_pos < sector; head_pos < sector ? head_pos++ : head_pos--) {
          labels.push(now+ iter);
          // data.push(head_pos);
          iter++;
        }
        data.push({
          x: now + iter,
          y: head_pos,
        });
        current_head = sector;
      });

      return data;
    }

    function calcTime(head, request_sector) {
      current_head = head;

      labels = [];
      data = [];
      iter = 1;
      now = Date.now();
      data.push({
        x: now + iter,
        y: current_head,
      });
      request_sector.forEach(sector => {
        let head_pos = current_head;
        let traverse_direction = head_pos > sector;
        if(head_pos < sector) {
          traverse_direction = head_pos < sector;
        }
        for(head_pos; head_pos > sector ? head_pos > sector : head_pos < sector; head_pos < sector ? head_pos++ : head_pos--) {
          labels.push(now+ iter);
          // data.push(head_pos);
          iter++;
        }
        data.push({
          x: now + iter,
          y: head_pos,
        });
        current_head = sector;
      });

      last = data.pop();

      return last.x - now;
    }

    function sstfCalc(head, request_track) {
      let copy_array = request_track.slice();
      let current_head = head;
      let result_array = [];
      while(copy_array.length > 0) {
        let distance = copy_array.map((v, i) => JSON.parse(JSON.stringify(
          {
            "distance": Math.abs(v - current_head),
            "value": v,
            "index": i,
          }
        )));
        function compareDistance(a, b) {
          return a.distance - b.distance;
        }
        distance.sort(compareDistance);
        console.log("DISTANCE [0]", distance[0]);
        result_array.push(distance[0].value);
        current_head = distance[0].value;
        copy_array.splice(distance[0].index, 1);
      }
      return result_array;
    }

    function scanCalc(head, request_track, cscan = false) {
      let copy_array = request_track.slice();
      console.log(copy_array);
      function asc(a, b) {
        return a - b;
      }
      copy_array.sort(asc);
      var lowerArray = [];
      var upperArray = [];

      console.log(copy_array);
      for (var i = 0; i < copy_array.length; i++) {
          if (copy_array[i] <= head) {
              lowerArray.push(copy_array[i]);
          } else {
              upperArray.push(copy_array[i]);
          }
      }
      console.log(lowerArray);
      if(!cscan){
        lowerArray.reverse();
      }
      console.log(lowerArray);
      console.log("SCAN", upperArray.concat(lowerArray));
      return upperArray.concat(lowerArray);
    }

    function drawChart(title, ctx, data, time, color = 'rgb(75, 192, 192)'){
      new Chart(ctx, {
        type: 'line',
        data: {
          datasets: [
            {
              label: title,
              data: data,
              borderColor: color,
            },
          ]
        },
        options: {
          scales: {
            y: {
              beginAtZero: true,
              reverse: true
            },
            x: {
              display: true,
              type: 'time',
              time:{
                unit: 'second',
                displayFormats: {
                    quarter: ''
                },
                min: data[0].x,
                max: data[0].x + time,
              }
            }
          }
        }
      });
      console.log("START", data[0].x);
      console.log("STOP", data[0].x + time);
    }

    path_track = [55, 58, 39, 18, 90, 160, 150, 38, 184];
    head_initial = 100;
    time = calcTime(head_initial, path_track);
    console.log("TIME", time);

    drawChart("FIFO", document.getElementById("fifo-chart"), fifoCalc(head_initial, path_track), time);
    drawChart("SSTF", document.getElementById("sstf-chart"), fifoCalc(head_initial, sstfCalc(head_initial, path_track)), time);
    drawChart("SCAN", document.getElementById("scan-chart"), fifoCalc(head_initial, scanCalc(head_initial, path_track)), time);
    drawChart("C-SCAN", document.getElementById("c-scan-chart"), fifoCalc(head_initial, scanCalc(head_initial, path_track, true)), time);
  
  </script>
</body>
</html>

<!-- hasil yang saya dapatkan [90, 58, 55, 150, 160, 39, 38, 18, 184] hasil yang saya inginkan [39, 38, 18, 55, 58, 90 150, 160, 184] -->